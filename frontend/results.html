<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Health Report — PCOS Smart Assistant</title>
    <script>
        // Dynamic base path for subdirectory deployments (GitHub Pages, Vercel).
        (function () {
            var pathParts = window.location.pathname.split('/').filter(function (p) { return p; });
            if (pathParts.length === 0) return;

            var firstPart = pathParts[0].toLowerCase();
            var firstPartIsFile = firstPart.indexOf('.') !== -1;
            if (firstPartIsFile || firstPart === 'frontend' || firstPart === 'pages') return;

            var base = document.createElement('base');
            base.href = '/' + pathParts[0] + '/frontend/';
            document.head.appendChild(base);
        })();
    </script>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="styles/healthcare.css">
    <link rel="icon" href="assets/favicon.svg" type="image/svg+xml">
    <link rel="manifest" href="manifest.json">
    <script src="https://cdn.jsdelivr.net/gh/darkroomengineering/lenis@latest/bundled/lenis.js"></script>
</head>

<body>
    <div class="navbar">
        <div class="nav-container">
            <div class="logo">🏥 PCOS Smart Assistant</div>
            <div class="nav-actions">
                <ul class="nav-menu">
                    <li><a href="dashboard.html" class="nav-link">Dashboard</a></li>
                    <li><a href="results.html" class="nav-link active">My Report</a></li>
                </ul>
                <div class="lang-switch">
                    <select id="languageSelect" aria-label="Select language">
                        <option value="en">English</option>
                        <option value="te">తెలుగు</option>
                        <option value="hi">हिंदी</option>
                    </select>
                </div>
                <button class="theme-toggle" id="themeToggle" type="button" aria-label="Toggle theme">
                    <span class="theme-icon"></span>
                </button>
            </div>
        </div>
    </div>

    <main class="container">
        <div class="results-header reveal">
            <div class="eyebrow">Your Personalized</div>
            <h1 class="hero-title">Health Analysis Report</h1>
            <p class="hero-subtitle">Based on your health data and comparison with medical dataset</p>
        </div>

        <!-- Risk Assessment Card -->
        <section class="report-section reveal delay-1">
            <div class="report-card risk-card">
                <h2>📊 Risk Assessment</h2>
                <div class="risk-level-display">
                    <div class="risk-badge" id="riskBadge">Analyzing...</div>
                    <div class="risk-score">
                        <span class="score-label">Risk Score</span>
                        <span class="score-value" id="riskScore">--</span>
                        <span class="score-max">/100</span>
                    </div>
                </div>
                <p class="summary-text" id="summaryText">Loading your analysis...</p>
            </div>
        </section>

        <!-- PCOS Insight -->
        <section class="report-section reveal delay-2">
            <section class="insight-panel" id="pcosInsight" aria-live="polite">
                <div class="insight-header">
                    <h3 id="pcosInsightTitle">PCOS Insight</h3>
                    <p class="muted" id="pcosInsightNote">Educational only. This does not diagnose PCOS. For medical
                        advice, consult a clinician.</p>
                </div>
                <div class="insight-grid">
                    <div class="insight-card">
                        <span class="insight-label" id="pcosLevelLabel">Indicator level</span>
                        <span class="insight-value" id="pcosLevel">—</span>
                        <p class="insight-note" id="pcosReason">Loading your PCOS insight...</p>
                    </div>
                    <div class="insight-card">
                        <span class="insight-label" id="pcosImpactsLabel">Possible longer-term impacts</span>
                        <ul class="insight-list" id="pcosImpacts"></ul>
                    </div>
                </div>
            </section>
        </section>

        <!-- Care Suggestions -->
        <section class="report-section reveal delay-2">
            <section class="assistant-inline" id="assistantInline" aria-live="polite">
                <div class="assistant-inline-header">
                    <h3>Care Suggestions</h3>
                    <p>Based on your entries. This is general guidance, not medical advice.</p>
                </div>
                <div class="assistant-inline-list" id="assistantInlineList"></div>
            </section>
        </section>

        <!-- Key Findings -->
        <section class="report-section reveal delay-2">
            <div class="report-card">
                <h2>🔍 Key Findings</h2>
                <ul class="findings-list" id="findingsList">
                    <li>Loading findings...</li>
                </ul>
            </div>
        </section>

        <!-- Recommendations -->
        <section class="report-section reveal delay-3">
            <div class="report-card">
                <h2>💡 Personalized Recommendations</h2>
                <ul class="recommendations-list" id="recommendationsList">
                    <li>Loading recommendations...</li>
                </ul>
            </div>
        </section>

        <!-- Doctor Recommendations -->
        <section class="report-section reveal delay-4">
            <div class="report-card doctors-card">
                <h2>👨‍⚕️ Recommended Doctors</h2>
                <p id="urgentMessage" class="urgent-message"></p>
                <div class="doctors-grid" id="doctorsGrid">
                    <p>Loading doctor recommendations...</p>
                </div>

                <div class="helplines-section">
                    <h3>Emergency Helplines</h3>
                    <div class="helplines-grid" id="helplinesGrid"></div>
                </div>
            </div>
        </section>

        <!-- Next Steps -->
        <section class="report-section reveal delay-5">
            <div class="report-card">
                <h2>📋 Next Steps</h2>
                <ol class="next-steps-list" id="nextStepsList">
                    <li>Loading next steps...</li>
                </ol>
            </div>
        </section>

        <!-- Lifestyle Tips -->
        <section class="report-section reveal delay-6">
            <div class="report-card">
                <h2>🌱 Lifestyle Tips</h2>
                <ul class="tips-list" id="tipsList">
                    <li>Loading lifestyle tips...</li>
                </ul>
            </div>
        </section>

        <!-- When to See Doctor -->
        <section class="report-section reveal delay-7">
            <div class="report-card warning-card">
                <h2>⚠️ When to See a Doctor Immediately</h2>
                <ul class="warning-list" id="warningList">
                    <li>Loading warning signs...</li>
                </ul>
            </div>
        </section>

        <!-- Actions -->
        <div class="report-actions">
            <button class="btn btn-primary btn-lg" id="printReport">🖨️ Print Report</button>
            <button class="btn btn-secondary" id="downloadPDF">📄 Download PDF</button>
            <a href="form.html" class="btn btn-secondary">📝 Add New Entry</a>
            <a href="dashboard.html" class="btn btn-secondary">🏠 Back to Dashboard</a>
        </div>
    </main>

    <footer class="footer">
        <p>&copy; 2026 PCOS Smart Assistant. This report is for educational purposes only and does not replace
            professional medical advice.</p>
    </footer>

    <script src="translations.js"></script>
    <script src="config-loader.js"></script>
    <script src="results.js"></script>
    <script>
        // Initialize translations on results page
        document.addEventListener('DOMContentLoaded', function () {
            const languageSelect = document.getElementById('languageSelect');
            if (languageSelect) {
                const savedLang = localStorage.getItem('pcos_language') || 'en';
                languageSelect.value = savedLang;
                window.i18n.setLang(savedLang);

                languageSelect.addEventListener('change', function () {
                    window.i18n.setLang(this.value);
                    location.reload();
                });
            }
        });
    </script>
</body>

</html>